<template>
  <!-- í˜ì´ì§€ ì „ì²´ë¥¼ ì„¸ë¡œ í”Œë ‰ìŠ¤ë¡œ ê°ì‹¸ì„œ Footerë¥¼ í•˜ë‹¨ì— ê³ ì • -->
  <div style="min-height:100vh;display:flex;flex-direction:column;">
    <HeaderView/>

    <!-- ë³¸ë¬¸ ì˜ì—­ì€ ë‚¨ì€ ê³µê°„ì„ ì°¨ì§€ -->
    <div style="flex:1;display:flex;flex-direction:column;">
      <!-- ë³¸ë¬¸ -->
      <div
        style="
          width: 686px;
          height: auto; /* ê³ ì •ê°’ â†’ ìë™ ë†’ì´ë¡œ */
          padding-top: 80px;
          padding-bottom: 13px;
          padding-left: 270px;
          margin: 50px auto 0;
          display: inline-flex;
          flex-direction: column;
          align-items: flex-start;
        "
      >
        <div style="width:404.67px;height:68px;position:relative;">
          <div style="width:120px;height:36px;left:142.33px;top:-3px;position:absolute;">
            <div
              style="
                left:50%;top:-3px;position:absolute;transform:translateX(-50%);
                text-align:center;color:#0A0A0A;font-size:30px;font-family:Arial;font-weight:400;line-height:36px;width:200px;
              "
            >
              ê³„ì •ì •ë³´
            </div>
          </div>

          <div
            style="
              width:100%;height:24px;left:50%;top:42.33px;position:absolute;transform:translateX(-50%);
            "
          >
            <div
              style="
                left:11px;top:-1.67px;position:absolute;text-align:center;color:#6A7282;
                font-size:16px;font-family:Arial;font-weight:400;line-height:24px;width:400px;
              "
            >
              ê°œì¸ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•˜ì„¸ìš”
            </div>
          </div>
        </div>

        <!-- ë©”ì¸ ìƒëŒ€ ì»¨í…Œì´ë„ˆ -->
        <div style="width:404px;position:relative;display:flex;flex-direction:column;gap:16px;">

          <!-- ìƒë‹¨ í”„ë¡œí•„ ì¹´ë“œ (ê³ ì • ì¢Œí‘œ ìœ ì§€) -->
          <div style="width:396px;height:116px;left:-0.50px;top:0px;position:relative;">
            <div style="width:672px;height:64px;left:120px;top:34px;position:absolute;">
              <div
                style="
                  width:672px;height:24px;left:0px;top:0px;position:absolute;display:inline-flex;align-items:center;gap:12px;
                "
              >
                <div style="width:48px;height:24px;position:relative;">
                  <div
                    style="left:0px;top:-1.67px;position:absolute;color:#0A0A0A;font-size:16px;font-family:Arial;font-weight:400;line-height:24px;"
                  >
                    {{ user.memberName }}
                  </div>
                </div>

                <div
                  v-if="user.isInfluencer"
                  style="
                    width:77.33px;height:21.33px;padding:2px 8px;background:rgba(255,255,255,0.20);
                    border-radius:8px;outline:0.67px rgba(255,255,255,0.30) solid;display:flex;justify-content:center;align-items:center;gap:4px;
                  "
                >
                  <div style="color:white;font-size:12px;font-family:Arial;line-height:16px;">
                    ì¸í”Œë£¨ì–¸ì„œ
                  </div>
                </div>
              </div>

              <div style="width:672px;height:24px;left:0px;top:32px;position:absolute;">
                <div
                  style="left:0px;top:-1.67px;position:absolute;color:#BE8FF0;font-size:16px;font-family:Arial;font-weight:400;line-height:24px;"
                >
                  {{ user.memberEmail }}
                </div>
              </div>

              <!-- ì¸í”Œë£¨ì–¸ì„œ ë²„íŠ¼ (ìœ„ì¹˜ ê·¸ëŒ€ë¡œ) -->
              <button
            type="button"
            @click="onOpenInfluencer"
            style="
              width: 95px;        /* ğŸ”¹ ê°€ë¡œí­ ì‚´ì§ ì¤„ì„ (110 â†’ 95) */
              height: 28px;       /* ğŸ”¹ ì„¸ë¡œí­ë„ ì¡°ê¸ˆ ì¤„ì„ (32 â†’ 28) */
              left: 190px;        /* ğŸ”¹ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™ (162.5 â†’ 190) */
              top: -6px;          /* ğŸ”¹ ìœ„ì•„ë˜ë„ ì‚´ì§ ì •ë ¬ ë§ì¶¤ */
              position: absolute;
              background: #D33AE0;
              border-radius: 8px;
              border: none;
              cursor: pointer;
            "
          >
            <div
              style="
                left: 5px;
                top: 5px;
                position: absolute;
                color: white;
                font-size: 10px;   /* ğŸ”¹ ê¸€ì”¨ í¬ê¸°ë„ ì•½ê°„ ì¤„ì„ (12 â†’ 11) */
                font-family: Arimo;
                line-height: 18px;
              "
            >
              ì¸í”Œë£¨ì–¸ì„œ í˜ì´ì§€
            </div>
          </button>
            </div>

            <div style="width:96px;height:96px;left:0px;top:10px;position:absolute;">
              <div
                style="
                  width:96px;height:96px;left:0;top:0;position:absolute;box-shadow:0px 4px 6px -4px rgba(0,0,0,0.10);
                  overflow:hidden;border-radius:22369600px;outline:4px white solid;outline-offset:-4px;display:inline-flex;
                "
              >
                <div
                  style="
                    flex:1 1 0;height:88px;background:#ECECF0;border-radius:22369600px;display:flex;justify-content:center;align-items:center;
                  "
                >
                  <img style="width:88px;height:132px;" alt="profile" src="../../public/influencerPage/influencerImg8.png" />
                </div>
              </div>
            </div>
          </div>

          <!-- í”„ë¡œí•„ í¼ (í‘œì‹œ/í¸ì§‘) -->
          <div
            style="
              width:404.67px;position:relative;display:inline-flex;flex-direction:column;gap:16px;
            "
          >
            <div style="align-self:stretch;height:27px;position:relative;">
              <div
                style="left:0;top:-1.67px;position:absolute;color:#0A0A0A;font-size:18px;font-family:Arial;line-height:27px;"
              >
                í”„ë¡œí•„
              </div>
            </div>

            <div style="display:flex;flex-direction:column;gap:16px;align-self:stretch;">

              <!-- ===== ê¸°ì¡´ í•„ë“œë“¤ ê·¸ëŒ€ë¡œ (íšŒì›ID/ë¹„ë°€ë²ˆí˜¸/ì´ë¦„/ì´ë©”ì¼/ì „í™”ë²ˆí˜¸/ì„±ë³„/ë‚˜ì´/í‚¤/ëª¸ë¬´ê²Œ) ===== -->
              <!-- (ì•„ë˜ ë¸”ë¡ë“¤ì€ ì‚¬ìš©ìê°€ ì¤€ ë§ˆí¬ì—…ì„ ê·¸ëŒ€ë¡œ ìœ ì§€) -->

              <!-- íšŒì› ID -->
              <div style="display:flex;flex-direction:column;gap:8px;align-self:stretch;height:64px;">
              <div style="display:inline-flex;align-items:center;height:20px;justify-content:flex-start;gap:8px;">
  <div style="height:20px;display:flex;align-items:center;">
    <div style="color:#0A0A0A;font-size:14px;font-family:Arial;line-height:20px;">
      íšŒì› ID
    </div>
  </div>
  <!-- í•„ìš”í•˜ë©´ ì˜¤ë¥¸ìª½ ì—¬ë°± ìœ ì§€ìš©: flex ê³µê°„ ì°¨ì§€ ì•ˆ í•˜ê²Œ í­ë§Œ ë‘  -->
  <div style="width:144.93px;height:20px;"></div>
</div>

                <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
                  <div
                    style="
                      width:404.67px;height:36px;padding-left:0;position:absolute;left:0;top:0;overflow:visible;border-radius:8px;
                      display:inline-flex;align-items:center;z-index:1;
                    "
                  >
                    <div style="width:107.84px;height:36px;display:flex;align-items:center;">
                      <template v-if="!editMode">
                        <div style="width:141px;color:#717182;font-size:14px;font-family:Arial;margin-left:-28px;">
                          {{ user.memberId }}
                        </div>
                      </template>
                      <template v-else>
                        <input
                          v-model="editUser.memberId"
                          type="text"
                          style="width:100%;height:28px;border:none;outline:none;background:transparent;font-size:14px;color:#111827; margin-left:10px;"
                        />
                      </template>
                    </div>
                  </div>
                  <div style="width:404.67px;height:36px;left:0;top:0;position:absolute;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
                </div>
              </div>

              <!-- ë¹„ë°€ë²ˆí˜¸ -->
              <div style="display:flex;flex-direction:column;gap:8px;align-self:stretch;height:64px;">
                <div style="display:inline-flex;align-items:center;height:20px;">
                  <div style="width:100px;height:20px;position:relative;">
                    <div style="left:0;top:-1.33px;position:absolute;color:#0A0A0A;font-size:14px;font-family:Arial;">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</div>
                  </div>
                </div>

                <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
                  <div
                    style="
                      width:404.67px;height:36px;padding-left:12px;position:absolute;left:0;top:0;overflow:visible;border-radius:8px;
                      display:inline-flex;align-items:center;z-index:1;
                    "
                  >
                    <div style="width:107.84px;height:36px;display:flex;align-items:center;">
                      <template v-if="!editMode">
                        <div style="color:#717182;font-size:14px;font-family:Arial;">
                          ---- ë³´ì•ˆì²˜ë¦¬ ----
                        </div>
                      </template>
                      <template v-else>
                        <input
                          v-model="editUser.memberPwd"
                          type="text"
                          autocomplete="new-password"
                          style="width:100%;height:28px;border:none;outline:none;background:transparent;font-size:14px;color:#111827;"
                        />
                      </template>
                    </div>
                  </div>
                  <div style="width:404.67px;height:36px;position:absolute;left:0;top:0;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
                </div>
              </div>

              <!-- ì´ë¦„ -->
              <div style="display:flex;flex-direction:column;gap:8px;align-self:stretch;height:64px;">
                <div style="display:inline-flex;align-items:center;height:20px;">
                  <div style="width:28px;height:20px;position:relative;">
                    <div style="left:0;top:-1.33px;position:absolute;color:#0A0A0A;font-size:14px;font-family:Arial;">ì´ë¦„</div>
                  </div>
                </div>

                <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
                  <div
                    style="
                      width:404.67px;height:36px;padding-left:12px;position:absolute;left:0;top:0;overflow:visible;border-radius:8px;
                      display:inline-flex;align-items:center;z-index:1;
                    "
                  >
                    <div style="width:107.84px;height:36px;display:flex;align-items:center;">
                      <template v-if="!editMode">
                        <div style="color:#717182;font-size:14px;font-family:Arial;">
                          {{ user.memberName }}
                        </div>
                      </template>
                      <template v-else>
                        <input
                          v-model="editUser.memberName"
                          type="text"
                          style="width:100%;height:28px;border:none;outline:none;background:transparent;font-size:14px;color:#111827;"
                        />
                      </template>
                    </div>
                  </div>
                  <div style="width:404.67px;height:36px;position:absolute;left:0;top:0;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
                </div>
              </div>

                        <!-- ì´ë©”ì¼ -->
            <div style="display:flex;flex-direction:column;gap:8px;align-self:stretch;height:64px;">
              <div style="display:inline-flex;align-items:center;height:20px;">
                <div style="width:42px;height:20px;position:relative;">
                  <div style="left:0;top:-1.33px;position:absolute;color:#0A0A0A;font-size:14px;font-family:Arial;">ì´ë©”ì¼</div>
                </div>
              </div>

              <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
                <div
                  style="
                    width:404.67px;height:36px;padding-left:12px;position:absolute;left:0;top:0;overflow:visible;border-radius:8px;
                    display:inline-flex;align-items:center;z-index:1;
                  "
                >
                  <div style="width:107.84px;height:36px;display:flex;align-items:center;width:400px;">
                    <template v-if="!editMode">
                      <div style="color:#717182;font-size:14px;font-family:Arial;">
                        {{ user.memberEmail }}
                      </div>
                    </template>
                    <template v-else>
                      <input
                        v-model="editUser.memberEmail"
                        type="email"
                        style="width:100%;height:28px;border:none;outline:none;background:transparent;font-size:14px;color:#111827;"
                      />
                    </template>
                  </div>
                </div>
                <div style="width:404.67px;height:36px;position:absolute;left:0;top:0;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
              </div>
            </div>

              <!-- ì „í™”ë²ˆí˜¸ -->
              <div style="display:flex;flex-direction:column;gap:8px;align-self:stretch;height:64px;">
                <div style="display:inline-flex;align-items:center;height:20px;">
                  <div style="width:56px;height:20px;position:relative;">
                    <div style="left:0;top:-1.33px;position:absolute;color:#0A0A0A;font-size:14px;font-family:Arial;">ì „í™”ë²ˆí˜¸</div>
                  </div>
                </div>

                <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
                  <div
                    style="
                      width:404.67px;height:36px;padding-left:12px;position:absolute;left:0;top:0;overflow:visible;border-radius:8px;
                      display:inline-flex;align-items:center;z-index:1;
                    "
                  >
                    <div style="width:107.84px;height:36px;display:flex;align-items:center;">
                      <template v-if="!editMode">
                        <div style="color:#717182;font-size:14px;font-family:Arial;">
                          {{ user.memberPhone }}
                        </div>
                      </template>
                      <template v-else>
                        <input
                          v-model="editUser.memberPhone"
                          type="text"
                          style="width:100%;height:20px;border:none;outline:none;background:transparent;font-size:14px;color:#111827;"
                        />
                      </template>
                    </div>
                  </div>
                  <div style="width:404.67px;height:36px;position:absolute;left:0;top:0;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
                </div>
              </div>

              <!-- ì„±ë³„ -->
<div style="display:flex;flex-direction:column;gap:8px;align-self:stretch;height:64px;">
  <div style="display:inline-flex;align-items:center;height:20px;">
    <div style="width:56px;height:20px;position:relative;">
      <div style="left:0;top:-1.33px;position:absolute;color:#0A0A0A;font-size:14px;font-family:Arial;">ì„±ë³„</div>
    </div>
  </div>

  <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
    <div
      style="
        width:404.67px;height:36px;padding-left:12px;position:absolute;left:0;top:0;
        overflow:visible;border-radius:8px;display:inline-flex;align-items:center;z-index:1;
      "
    >
      <div style="width:107.84px;height:36px;display:flex;align-items:center;">
        <template v-if="!editMode">
          <div style="color:#717182;font-size:14px;font-family:Arial;">
            {{ user.memberGender }}
          </div>
        </template>
        <template v-else>
          <select
            v-model="editUser.memberGender"
            style="width:100%;height:28px;border:none;outline:none;background:transparent;font-size:14px;color:#111827;"
          >
            <option value="">ì„ íƒ</option>
            <option value="ë‚¨ì„±">ë‚¨ì„±</option>
            <option value="ì—¬ì„±">ì—¬ì„±</option>
          </select>
        </template>
      </div>
    </div>
    <div style="width:404.67px;height:36px;position:absolute;left:0;top:0;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
  </div>
</div>
<!-- ë‚˜ì´ -->
<div style="display:flex;flex-direction:column;gap:8px;align-self:stretch;height:64px;">
  <div style="display:inline-flex;align-items:center;height:20px;">
    <div style="width:56px;height:20px;position:relative;">
      <div style="left:0;top:-1.33px;position:absolute;color:#0A0A0A;font-size:14px;font-family:Arial;">ë‚˜ì´</div>
    </div>
  </div>

  <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
    <div
      style="
        width:404.67px;height:36px;padding-left:12px;position:absolute;left:0;top:0;
        overflow:visible;border-radius:8px;display:inline-flex;align-items:center;z-index:1;
      "
    >
      <div style="width:107.84px;height:36px;display:flex;align-items:center;">
        <template v-if="!editMode">
          <div style="color:#717182;font-size:14px;font-family:Arial;">
            {{ user.memberAge }}
          </div>
        </template>
        <template v-else>
          <input
            v-model.number="editUser.memberAge"
            type="number"
            min="0"
            max="120"
            inputmode="numeric"
            style="width:100%;height:28px;border:none;outline:none;background:transparent;font-size:14px;color:#111827;"
          />
        </template>
      </div>
    </div>
    <div style="width:404.67px;height:36px;position:absolute;left:0;top:0;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
  </div>
</div>

             <!-- í‚¤ -->
<div style="display:flex;flex-direction:column;gap:8px;align-self:stretch;height:64px;">
  <div style="display:inline-flex;align-items:center;height:20px;">
    <div style="width:56px;height:20px;position:relative;">
      <div style="left:0;top:-1.33px;position:absolute;color:#0A0A0A;font-size:14px;font-family:Arial;">í‚¤</div>
    </div>
  </div>

  <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
    <div
      style="
        width:404.67px;height:36px;padding-left:12px;position:absolute;left:0;top:0;
        overflow:visible;border-radius:8px;display:inline-flex;align-items:center;z-index:1;
      "
    >
      <div style="width:107.84px;height:36px;display:flex;align-items:center;">
        <template v-if="!editMode">
          <div style="color:#717182;font-size:14px;font-family:Arial;">
            {{ user.memberHeight }}
          </div>
        </template>
        <template v-else>
          <input
            v-model.number="editUser.memberHeight"
            type="number"
            min="0"
            max="300"
            step="0.1"
            inputmode="decimal"
            style="width:100%;height:28px;border:none;outline:none;background:transparent;font-size:14px;color:#111827;"
          />
        </template>
      </div>
    </div>
    <div style="width:404.67px;height:36px;position:absolute;left:0;top:0;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
  </div>
</div>

             <!-- ëª¸ë¬´ê²Œ -->
<div style="display:flex;flex-direction:column;gap:8px;align-self:stretch;height:64px;">
  <div style="display:inline-flex;align-items:center;height:20px;">
    <div style="width:56px;height:20px;position:relative;">
      <div style="left:0;top:-1.33px;position:absolute;color:#0A0A0A;font-size:14px;font-family:Arial;">ëª¸ë¬´ê²Œ</div>
    </div>
  </div>

  <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
    <div
      style="
        width:404.67px;height:36px;padding-left:12px;position:absolute;left:0;top:0;
        overflow:visible;border-radius:8px;display:inline-flex;align-items:center;z-index:1;
      "
    >
      <div style="width:107.84px;height:36px;display:flex;align-items:center;">
        <template v-if="!editMode">
          <div style="color:#717182;font-size:14px;font-family:Arial;">
            {{ user.memberWeight }}
          </div>
        </template>
        <template v-else>
          <input
            v-model.number="editUser.memberWeight"
            type="number"
            min="0"
            max="500"
            step="0.1"
            inputmode="decimal"
            style="width:100%;height:28px;border:none;outline:none;background:transparent;font-size:14px;color:#111827;"
          />
        </template>
      </div>
    </div>
    <div style="width:404.67px;height:36px;position:absolute;left:0;top:0;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
  </div>
</div>

            </div> <!-- /í•„ë“œë“¤ -->

            <!-- ì£¼ì†Œ (ê²¹ì¹¨ í•´ì†Œ: absolute ì œê±°, ìì—° ë°°ì¹˜) -->
            <div
              style="
                width:404.67px;position:relative;display:inline-flex;flex-direction:column;gap:8px;
              "
            >
              <div style="align-self:stretch;height:20px;display:inline-flex;justify-content:space-between;align-items:center;">
                <div style="width:56px;height:20px;position:relative;">
                  <div style="left:0;top:-1.33px;position:absolute;color:#0A0A0A;font-size:14px;font-family:Arial;">
                    ì£¼ì†Œ
                  </div>
                </div>
              </div>
              <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
                <div
                  style="
                    width:404.67px;height:36px;padding-left:12px;position:absolute;left:0;top:0;overflow:visible;border-radius:8px;
                    display:inline-flex;align-items:center;z-index:1;
                  "
                >
                  <div style="width:107.84px;height:36px;display:flex;align-items:center;width:300px;">
                    <template v-if="!editMode">
                      <div style="color:#717182;font-size:14px;font-family:Arial;">
                        {{ user.memberAddress }}
                      </div>
                    </template>
                    <template v-else>
                      <input
                        v-model="editUser.memberAddress"
                        type="text"
                        style="width:100%;height:28px;border:none;outline:none;background:transparent;font-size:14px;color:#111827;"
                      />
                    </template>
                  </div>
                </div>
                <div style="width:404.67px;height:36px;position:absolute;left:0;top:0;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
              </div>
            </div>

            <!-- ìˆ˜ì •í•˜ê¸° / ì €ì¥í•˜ê¸° ë²„íŠ¼ (ê²¹ì¹¨ í•´ì†Œ: absolute ì œê±°, ê°€ë¡œ 100%) -->
            <button
              type="button"
              @click="onEditOrSave"
              style="
                width:404.67px;height:44px;margin-top:16px;background:black;border-radius:8px;border:none;cursor:pointer;color:white;font-size:14px;font-family:Arial;
              "
            >
              {{ editMode ? 'ì €ì¥í•˜ê¸°' : 'ìˆ˜ì •í•˜ê¸°' }}
            </button>

            <!-- í‘¸í„° ë§í¬ (ê²¹ì¹¨ í•´ì†Œ: absolute ì œê±°, ìƒë‹¨ ë³´ë” ìœ ì§€) -->
            <div
              style="
                width:404.67px;padding-top:24.67px;margin-top:16px;border-top:0.67px #F3F4F6 solid;
                display:inline-flex;justify-content:center;gap:16px;color:#6A7282;font-size:14px;font-family:Arial;
              "
            >
              <div>ë‚´ì •ë³´</div>
              <div>â€¢</div>
              <div>ë³´ì•ˆì„¼í„°</div>
              <div>â€¢</div>
              <div>ê³ ê°ì„¼í„°</div>
            </div>

          </div> <!-- /í”„ë¡œí•„ í¼ -->

        </div> <!-- /ë©”ì¸ ìƒëŒ€ ì»¨í…Œì´ë„ˆ -->
      </div> <!-- /ë³¸ë¬¸ ë˜í¼ -->
    </div>

    <FooterView/>
  </div>
</template>

<script setup>
import { ref, onMounted } from "vue";
import axios from "axios";
import { useRouter } from 'vue-router';
import { watch } from 'vue';

import FooterView from "../FooterView.vue";
import HeaderView from "../HeaderView.vue";

const user = ref({});
const editMode = ref(false);
const router = useRouter()

const token = sessionStorage.getItem('token');
let memberNum = ref("");
let memberId = ref("");
let memberEmail = ref("");
let memberState = ref("");

// í¸ì§‘ ë²„í¼ (ë‹‰ë„¤ì„ ì œê±°, ì„±ë³„/ë‚˜ì´/í‚¤/ëª¸ë¬´ê²Œ ì¶”ê°€)
const editUser = ref({
  memberId: "",
  memberPwd: "",
  memberName: "",
  memberEmail: "",
  phoneMasked: "",
  address: "",
  gender: "",
  age: null,
  height: null,
  weight: null,
});

onMounted(async () => {
   try {
    



    axios.get('/api/member-service/member/auth',{
    headers: {
        Authorization: `Bearer ${token}`
    }
    }).then((res) => {
      console.log(res)
      if(res.data.memberId == null){
        router.push('/')
      }else{
        memberNum.value = res.data.memberNum
        memberId.value = res.data.memberId
        memberEmail.value = res.data.memberEmail
        memberState.value = res.data.memberState
      }
    })

    watch(memberNum, async (current,old) => {
      const res = await axios.get(`/api/member-service/member/membernum/${memberNum.value}`);
      user.value = res.data;
    })
  } catch (error) {
    console.error('íšŒì› ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:', error);
  }
});




function onOpenInfluencer() {
  alert("ì¸í”Œë£¨ì–¸ì„œ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.");
}

function fillEditBufferFromUser() {
  editUser.value.memberId    = user.value.memberId    || "";
  editUser.value.memberPwd = "";
  editUser.value.memberName  = user.value.memberName  || "";
  editUser.value.memberEmail = user.value.memberEmail || "";
  editUser.value.memberPhone = user.value.memberPhone|| "";
  editUser.value.memberAddress = user.value.memberAddress     || "";
  editUser.value.memberGender      = user.value.memberGender      || "";
  editUser.value.memberAge         = user.value.memberAge ?? "";
  editUser.value.memberHeight      = user.value.memberHeight ?? "";
  editUser.value.memberWeight      = user.value.memberWeight ?? "";
}

async function saveMember() {
  try {
    if (!user.value?.memberNum) {
      throw new Error("íšŒì› ê³ ìœ ë²ˆí˜¸(memberNum)ê°€ ì—†ìŠµë‹ˆë‹¤.");
    }
    const token = localStorage.getItem("accessToken");
    const headers = { "Content-Type": "application/json" };
    if (token) headers.Authorization = `Bearer ${token}`;

    const payload = {
      memberNum:   user.value.memberNum,
      memberId:    editUser.value.memberId,
      memberPwd:   editUser.value.memberPwd,
      memberName:  editUser.value.memberName,
      memberEmail: editUser.value.memberEmail,
      memberPhone: editUser.value.memberPhone,
      memberAddress:     editUser.value.memberAddress,
      memberGender:      editUser.value.memberGender,
      memberAge:         editUser.value.memberAge,
      memberHeight:      editUser.value.memberHeight,
      memberWeight:      editUser.value.memberWeight,
    };

    const url = `/api/member-service/member/membernum/${encodeURIComponent(user.value.memberNum)}`;
    await axios.put(url, payload, { headers });

    user.value = { ...user.value, ...payload };
    alert("íšŒì›ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
    editMode.value = false;
  } catch (error) {
    console.error("íšŒì›ì •ë³´ ìˆ˜ì • ì‹¤íŒ¨:", error?.response?.data || error.message || error);
    alert("íšŒì›ì •ë³´ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
  }
}

function onEditOrSave() {
  if (!editMode.value) {
    fillEditBufferFromUser();
    editMode.value = true;
  } else {
    saveMember();
  }
}
</script>

<style scoped>
/* ì „ë‹¬ë°›ì€ ë””ìì¸ì„ ìµœëŒ€í•œ ìœ ì§€í•˜ê¸° ìœ„í•´ ë³„ë„ í´ë˜ìŠ¤ëŠ” ìµœì†Œí™”í–ˆìŠµë‹ˆë‹¤. */
</style>
