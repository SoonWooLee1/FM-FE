<template>
  <!-- ÌéòÏù¥ÏßÄ Ï†ÑÏ≤¥Î•º ÏÑ∏Î°ú ÌîåÎ†âÏä§Î°ú Í∞êÏã∏ÏÑú FooterÎ•º ÌïòÎã®Ïóê Í≥†Ï†ï -->
  <div style="min-height:100vh;display:flex;flex-direction:column;">
    <HeaderView/>

    <!-- Î≥∏Î¨∏ ÏòÅÏó≠ÏùÄ ÎÇ®ÏùÄ Í≥µÍ∞ÑÏùÑ Ï∞®ÏßÄ -->
    <div style="flex:1;display:flex;flex-direction:column;">
      <!-- Î≥∏Î¨∏ -->
      <div
        style="
          width: 686px;
          height: auto; /* Í≥†Ï†ïÍ∞í ‚Üí ÏûêÎèô ÎÜíÏù¥Î°ú */
          padding-top: 80px;
          padding-bottom: 13px;
          padding-left: 270px;
          margin: 50px auto 0;
          display: inline-flex;
          flex-direction: column;
          align-items: flex-start;
        "
      >
        <div style="width:404.67px;height:68px;position:relative;">
          <div style="width:120px;height:36px;left:142.33px;top:-3px;position:absolute;">
            <div
              style="
                left:50%;top:-3px;position:absolute;transform:translateX(-50%);
                text-align:center;color:#0A0A0A;font-size:30px;font-family:Arial;font-weight:400;line-height:36px;width:200px;
              "
            >
              Í≥ÑÏ†ïÏ†ïÎ≥¥
            </div>
          </div>

          <div
            style="
              width:100%;height:24px;left:50%;top:42.33px;position:absolute;transform:translateX(-50%);
            "
          >
            <div
              style="
                left:11px;top:-1.67px;position:absolute;text-align:center;color:#6A7282;
                font-size:16px;font-family:Arial;font-weight:400;line-height:24px;width:400px;
              "
            >
              Í∞úÏù∏Ï†ïÎ≥¥Î•º ÏïàÏ†ÑÌïòÍ≤å Í¥ÄÎ¶¨ÌïòÏÑ∏Ïöî
            </div>
          </div>
        </div>

        <!-- Î©îÏù∏ ÏÉÅÎåÄ Ïª®ÌÖåÏù¥ÎÑà -->
        <div style="width:404px;position:relative;display:flex;flex-direction:column;gap:16px;">

          <!-- ÏÉÅÎã® ÌîÑÎ°úÌïÑ Ïπ¥Îìú (Í≥†Ï†ï Ï¢åÌëú Ïú†ÏßÄ) -->
          <div style="width:396px;height:116px;left:-0.50px;top:0px;position:relative;">
            <div style="width:672px;height:64px;left:120px;top:34px;position:absolute;">
              <div
                style="
                  width:672px;height:24px;left:0px;top:0px;position:absolute;display:inline-flex;align-items:center;gap:12px;
                "
              >
                <div style="width:48px;height:24px;position:relative;">
                  <div
                    style="left:0px;top:-1.67px;position:absolute;color:#0A0A0A;font-size:16px;font-family:Arial;font-weight:400;line-height:24px;"
                  >
                    {{ user.memberName }}
                  </div>
                </div>

                <div
                  v-if="user.isInfluencer"
                  style="
                    width:77.33px;height:21.33px;padding:2px 8px;background:rgba(255,255,255,0.20);
                    border-radius:8px;outline:0.67px rgba(255,255,255,0.30) solid;display:flex;justify-content:center;align-items:center;gap:4px;
                  "
                >
                  <div style="color:white;font-size:12px;font-family:Arial;line-height:16px;">
                    Ïù∏ÌîåÎ£®Ïñ∏ÏÑú
                  </div>
                </div>
              </div>

              <div style="width:672px;height:24px;left:0px;top:32px;position:absolute;">
                <div
                  style="left:0px;top:-1.67px;position:absolute;color:#BE8FF0;font-size:16px;font-family:Arial;font-weight:400;line-height:24px;"
                >
                  {{ user.memberEmail }}
                </div>
              </div>

              <!-- Ïù∏ÌîåÎ£®Ïñ∏ÏÑú Î≤ÑÌäº (ÏúÑÏπò Í∑∏ÎåÄÎ°ú) -->
              <button
            type="button"
            @click="onOpenInfluencer"
            style="
              width: 95px;        /* üîπ Í∞ÄÎ°úÌè≠ ÏÇ¥Ïßù Ï§ÑÏûÑ (110 ‚Üí 95) */
              height: 28px;       /* üîπ ÏÑ∏Î°úÌè≠ÎèÑ Ï°∞Í∏à Ï§ÑÏûÑ (32 ‚Üí 28) */
              left: 190px;        /* üîπ Ïò§Î•∏Ï™ΩÏúºÎ°ú Ïù¥Îèô (162.5 ‚Üí 190) */
              top: -6px;          /* üîπ ÏúÑÏïÑÎûòÎèÑ ÏÇ¥Ïßù Ï†ïÎ†¨ ÎßûÏ∂§ */
              position: absolute;
              background: #D33AE0;
              border-radius: 8px;
              border: none;
              cursor: pointer;
            "
          >
            <div
              style="
                left: 5px;
                top: 5px;
                position: absolute;
                color: white;
                font-size: 10px;   /* üîπ Í∏ÄÏî® ÌÅ¨Í∏∞ÎèÑ ÏïΩÍ∞Ñ Ï§ÑÏûÑ (12 ‚Üí 11) */
                font-family: Arimo;
                line-height: 18px;
              "
            >
              Ïù∏ÌîåÎ£®Ïñ∏ÏÑú ÌéòÏù¥ÏßÄ
            </div>
          </button>
            </div>

            <div style="width:96px;height:96px;left:0px;top:10px;position:absolute;">
              <div
                style="
                  width:96px;height:96px;left:0;top:0;position:absolute;box-shadow:0px 4px 6px -4px rgba(0,0,0,0.10);
                  overflow:hidden;border-radius:22369600px;outline:4px white solid;outline-offset:-4px;display:inline-flex;
                "
              >
                <div
                  style="
                    flex:1 1 0;height:88px;background:#ECECF0;border-radius:22369600px;display:flex;justify-content:center;align-items:center;
                  "
                >
                  <img style="width:88px;height:132px;" alt="profile" src="../../public/influencerPage/influencerImg8.png" />
                </div>
              </div>
            </div>
          </div>

          <!-- ÌîÑÎ°úÌïÑ Ìèº (ÌëúÏãú/Ìé∏Ïßë) -->
          <div
            style="
              width:404.67px;position:relative;display:inline-flex;flex-direction:column;gap:16px;
            "
          >
            <div style="align-self:stretch;height:27px;position:relative;">
              <div
                style="left:0;top:-1.67px;position:absolute;color:#0A0A0A;font-size:18px;font-family:Arial;line-height:27px;"
              >
                ÌîÑÎ°úÌïÑ
              </div>
            </div>

            <div style="display:flex;flex-direction:column;gap:16px;align-self:stretch;">

              <!-- ===== Í∏∞Ï°¥ ÌïÑÎìúÎì§ Í∑∏ÎåÄÎ°ú (ÌöåÏõêID/ÎπÑÎ∞ÄÎ≤àÌò∏/Ïù¥Î¶Ñ/Ïù¥Î©îÏùº/Ï†ÑÌôîÎ≤àÌò∏/ÏÑ±Î≥Ñ/ÎÇòÏù¥/ÌÇ§/Î™∏Î¨¥Í≤å) ===== -->
              <!-- (ÏïÑÎûò Î∏îÎ°ùÎì§ÏùÄ ÏÇ¨Ïö©ÏûêÍ∞Ä Ï§Ä ÎßàÌÅ¨ÏóÖÏùÑ Í∑∏ÎåÄÎ°ú Ïú†ÏßÄ) -->

              <!-- ÌöåÏõê ID -->
              <div style="display:flex;flex-direction:column;gap:8px;align-self:stretch;height:64px;">
              <div style="display:inline-flex;align-items:center;height:20px;justify-content:flex-start;gap:8px;">
  <div style="height:20px;display:flex;align-items:center;">
    <div style="color:#0A0A0A;font-size:14px;font-family:Arial;line-height:20px;">
      ÌöåÏõê ID
    </div>
  </div>
  <!-- ÌïÑÏöîÌïòÎ©¥ Ïò§Î•∏Ï™Ω Ïó¨Î∞± Ïú†ÏßÄÏö©: flex Í≥µÍ∞Ñ Ï∞®ÏßÄ Ïïà ÌïòÍ≤å Ìè≠Îßå Îë† -->
  <div style="width:144.93px;height:20px;"></div>
</div>

                <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
                  <div
                    style="
                      width:404.67px;height:36px;padding-left:0;position:absolute;left:0;top:0;overflow:visible;border-radius:8px;
                      display:inline-flex;align-items:center;z-index:1;
                    "
                  >
                    <div style="width:107.84px;height:36px;display:flex;align-items:center;">
                      <template v-if="!editMode">
                        <div style="width:141px;color:#717182;font-size:14px;font-family:Arial;margin-left:-28px;">
                          {{ user.memberId }}
                        </div>
                      </template>
                      <template v-else>
                        <input
                          v-model="editUser.memberId"
                          type="text"
                          style="width:100%;height:28px;border:none;outline:none;background:transparent;font-size:14px;color:#111827; margin-left:10px;"
                        />
                      </template>
                    </div>
                  </div>
                  <div style="width:404.67px;height:36px;left:0;top:0;position:absolute;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
                </div>
              </div>

              <!-- ÎπÑÎ∞ÄÎ≤àÌò∏ -->
              <div style="display:flex;flex-direction:column;gap:8px;align-self:stretch;height:64px;">
                <div style="display:inline-flex;align-items:center;height:20px;">
                  <div style="width:100px;height:20px;position:relative;">
                    <div style="left:0;top:-1.33px;position:absolute;color:#0A0A0A;font-size:14px;font-family:Arial;">ÎπÑÎ∞ÄÎ≤àÌò∏ Î≥ÄÍ≤Ω</div>
                  </div>
                </div>

                <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
                  <div
                    style="
                      width:404.67px;height:36px;padding-left:12px;position:absolute;left:0;top:0;overflow:visible;border-radius:8px;
                      display:inline-flex;align-items:center;z-index:1;
                    "
                  >
                    <div style="width:107.84px;height:36px;display:flex;align-items:center;">
                      <template v-if="!editMode">
                        <div style="color:#717182;font-size:14px;font-family:Arial;">
                          ---- Î≥¥ÏïàÏ≤òÎ¶¨ ----
                        </div>
                      </template>
                      <template v-else>
                        <input
                          v-model="editUser.memberPwd"
                          type="text"
                          autocomplete="new-password"
                          style="width:100%;height:28px;border:none;outline:none;background:transparent;font-size:14px;color:#111827;"
                        />
                      </template>
                    </div>
                  </div>
                  <div style="width:404.67px;height:36px;position:absolute;left:0;top:0;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
                </div>
              </div>

              <!-- Ïù¥Î¶Ñ -->
              <div style="display:flex;flex-direction:column;gap:8px;align-self:stretch;height:64px;">
                <div style="display:inline-flex;align-items:center;height:20px;">
                  <div style="width:28px;height:20px;position:relative;">
                    <div style="left:0;top:-1.33px;position:absolute;color:#0A0A0A;font-size:14px;font-family:Arial;">Ïù¥Î¶Ñ</div>
                  </div>
                </div>

                <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
                  <div
                    style="
                      width:404.67px;height:36px;padding-left:12px;position:absolute;left:0;top:0;overflow:visible;border-radius:8px;
                      display:inline-flex;align-items:center;z-index:1;
                    "
                  >
                    <div style="width:107.84px;height:36px;display:flex;align-items:center;">
                      <template v-if="!editMode">
                        <div style="color:#717182;font-size:14px;font-family:Arial;">
                          {{ user.memberName }}
                        </div>
                      </template>
                      <template v-else>
                        <input
                          v-model="editUser.memberName"
                          type="text"
                          style="width:100%;height:28px;border:none;outline:none;background:transparent;font-size:14px;color:#111827;"
                        />
                      </template>
                    </div>
                  </div>
                  <div style="width:404.67px;height:36px;position:absolute;left:0;top:0;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
                </div>
              </div>

                        <!-- Ïù¥Î©îÏùº -->
            <div style="display:flex;flex-direction:column;gap:8px;align-self:stretch;height:64px;">
              <div style="display:inline-flex;align-items:center;height:20px;">
                <div style="width:42px;height:20px;position:relative;">
                  <div style="left:0;top:-1.33px;position:absolute;color:#0A0A0A;font-size:14px;font-family:Arial;">Ïù¥Î©îÏùº</div>
                </div>
              </div>

              <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
                <div
                  style="
                    width:404.67px;height:36px;padding-left:12px;position:absolute;left:0;top:0;overflow:visible;border-radius:8px;
                    display:inline-flex;align-items:center;z-index:1;
                  "
                >
                  <div style="width:107.84px;height:36px;display:flex;align-items:center;width:400px;">
                    <template v-if="!editMode">
                      <div style="color:#717182;font-size:14px;font-family:Arial;">
                        {{ user.memberEmail }}
                      </div>
                    </template>
                    <template v-else>
                      <input
                        v-model="editUser.memberEmail"
                        type="email"
                        style="width:100%;height:28px;border:none;outline:none;background:transparent;font-size:14px;color:#111827;"
                      />
                    </template>
                  </div>
                </div>
                <div style="width:404.67px;height:36px;position:absolute;left:0;top:0;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
              </div>
            </div>

              <!-- Ï†ÑÌôîÎ≤àÌò∏ -->
              <div style="display:flex;flex-direction:column;gap:8px;align-self:stretch;height:64px;">
                <div style="display:inline-flex;align-items:center;height:20px;">
                  <div style="width:56px;height:20px;position:relative;">
                    <div style="left:0;top:-1.33px;position:absolute;color:#0A0A0A;font-size:14px;font-family:Arial;">Ï†ÑÌôîÎ≤àÌò∏</div>
                  </div>
                </div>

                <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
                  <div
                    style="
                      width:404.67px;height:36px;padding-left:12px;position:absolute;left:0;top:0;overflow:visible;border-radius:8px;
                      display:inline-flex;align-items:center;z-index:1;
                    "
                  >
                    <div style="width:107.84px;height:36px;display:flex;align-items:center;">
                      <template v-if="!editMode">
                        <div style="color:#717182;font-size:14px;font-family:Arial;">
                          {{ user.memberPhone }}
                        </div>
                      </template>
                      <template v-else>
                        <input
                          v-model="editUser.memberPhone"
                          type="text"
                          style="width:100%;height:20px;border:none;outline:none;background:transparent;font-size:14px;color:#111827;"
                        />
                      </template>
                    </div>
                  </div>
                  <div style="width:404.67px;height:36px;position:absolute;left:0;top:0;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
                </div>
              </div>

              <!-- ÏÑ±Î≥Ñ -->
<div style="display:flex;flex-direction:column;gap:8px;align-self:stretch;height:64px;">
  <div style="display:inline-flex;align-items:center;height:20px;">
    <div style="width:56px;height:20px;position:relative;">
      <div style="left:0;top:-1.33px;position:absolute;color:#0A0A0A;font-size:14px;font-family:Arial;">ÏÑ±Î≥Ñ</div>
    </div>
  </div>

  <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
    <div
      style="
        width:404.67px;height:36px;padding-left:12px;position:absolute;left:0;top:0;
        overflow:visible;border-radius:8px;display:inline-flex;align-items:center;z-index:1;
      "
    >
      <div style="width:107.84px;height:36px;display:flex;align-items:center;">
        <template v-if="!editMode">
          <div style="color:#717182;font-size:14px;font-family:Arial;">
            {{ user.memberGender }}
          </div>
        </template>
        <template v-else>
          <select
            v-model="editUser.memberGender"
            style="width:100%;height:28px;border:none;outline:none;background:transparent;font-size:14px;color:#111827;"
          >
            <option value="">ÏÑ†ÌÉù</option>
            <option value="ÎÇ®ÏÑ±">ÎÇ®ÏÑ±</option>
            <option value="Ïó¨ÏÑ±">Ïó¨ÏÑ±</option>
          </select>
        </template>
      </div>
    </div>
    <div style="width:404.67px;height:36px;position:absolute;left:0;top:0;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
  </div>
</div>
<!-- ÎÇòÏù¥ -->
<div style="display:flex;flex-direction:column;gap:8px;align-self:stretch;height:64px;">
  <div style="display:inline-flex;align-items:center;height:20px;">
    <div style="width:56px;height:20px;position:relative;">
      <div style="left:0;top:-1.33px;position:absolute;color:#0A0A0A;font-size:14px;font-family:Arial;">ÎÇòÏù¥</div>
    </div>
  </div>

  <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
    <div
      style="
        width:404.67px;height:36px;padding-left:12px;position:absolute;left:0;top:0;
        overflow:visible;border-radius:8px;display:inline-flex;align-items:center;z-index:1;
      "
    >
      <div style="width:107.84px;height:36px;display:flex;align-items:center;">
        <template v-if="!editMode">
          <div style="color:#717182;font-size:14px;font-family:Arial;">
            {{ user.memberAge }}
          </div>
        </template>
        <template v-else>
          <input
            v-model.number="editUser.memberAge"
            type="number"
            min="0"
            max="120"
            inputmode="numeric"
            style="width:100%;height:28px;border:none;outline:none;background:transparent;font-size:14px;color:#111827;"
          />
        </template>
      </div>
    </div>
    <div style="width:404.67px;height:36px;position:absolute;left:0;top:0;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
  </div>
</div>

             <!-- ÌÇ§ -->
<div style="display:flex;flex-direction:column;gap:8px;align-self:stretch;height:64px;">
  <div style="display:inline-flex;align-items:center;height:20px;">
    <div style="width:56px;height:20px;position:relative;">
      <div style="left:0;top:-1.33px;position:absolute;color:#0A0A0A;font-size:14px;font-family:Arial;">ÌÇ§</div>
    </div>
  </div>

  <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
    <div
      style="
        width:404.67px;height:36px;padding-left:12px;position:absolute;left:0;top:0;
        overflow:visible;border-radius:8px;display:inline-flex;align-items:center;z-index:1;
      "
    >
      <div style="width:107.84px;height:36px;display:flex;align-items:center;">
        <template v-if="!editMode">
          <div style="color:#717182;font-size:14px;font-family:Arial;">
            {{ user.memberHeight }}
          </div>
        </template>
        <template v-else>
          <input
            v-model.number="editUser.memberHeight"
            type="number"
            min="0"
            max="300"
            step="0.1"
            inputmode="decimal"
            style="width:100%;height:28px;border:none;outline:none;background:transparent;font-size:14px;color:#111827;"
          />
        </template>
      </div>
    </div>
    <div style="width:404.67px;height:36px;position:absolute;left:0;top:0;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
  </div>
</div>

             <!-- Î™∏Î¨¥Í≤å -->
<div style="display:flex;flex-direction:column;gap:8px;align-self:stretch;height:64px;">
  <div style="display:inline-flex;align-items:center;height:20px;">
    <div style="width:56px;height:20px;position:relative;">
      <div style="left:0;top:-1.33px;position:absolute;color:#0A0A0A;font-size:14px;font-family:Arial;">Î™∏Î¨¥Í≤å</div>
    </div>
  </div>

  <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
    <div
      style="
        width:404.67px;height:36px;padding-left:12px;position:absolute;left:0;top:0;
        overflow:visible;border-radius:8px;display:inline-flex;align-items:center;z-index:1;
      "
    >
      <div style="width:107.84px;height:36px;display:flex;align-items:center;">
        <template v-if="!editMode">
          <div style="color:#717182;font-size:14px;font-family:Arial;">
            {{ user.memberWeight }}
          </div>
        </template>
        <template v-else>
          <input
            v-model.number="editUser.memberWeight"
            type="number"
            min="0"
            max="500"
            step="0.1"
            inputmode="decimal"
            style="width:100%;height:28px;border:none;outline:none;background:transparent;font-size:14px;color:#111827;"
          />
        </template>
      </div>
    </div>
    <div style="width:404.67px;height:36px;position:absolute;left:0;top:0;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
  </div>
</div>

            </div> <!-- /ÌïÑÎìúÎì§ -->

            <!-- Ï£ºÏÜå (Í≤πÏπ® Ìï¥ÏÜå: absolute Ï†úÍ±∞, ÏûêÏó∞ Î∞∞Ïπò) -->
            <div
              style="
                width:404.67px;position:relative;display:inline-flex;flex-direction:column;gap:8px;
              "
            >
              <div style="align-self:stretch;height:20px;display:inline-flex;justify-content:space-between;align-items:center;">
                <div style="width:56px;height:20px;position:relative;">
                  <div style="left:0;top:-1.33px;position:absolute;color:#0A0A0A;font-size:14px;font-family:Arial;">
                    Ï£ºÏÜå
                  </div>
                </div>
              </div>
              <div style="align-self:stretch;height:36px;position:relative;background:#F3F3F5;border-radius:8px;">
                <div
                  style="
                    width:404.67px;height:36px;padding-left:12px;position:absolute;left:0;top:0;overflow:visible;border-radius:8px;
                    display:inline-flex;align-items:center;z-index:1;
                  "
                >
                  <div style="width:107.84px;height:36px;display:flex;align-items:center;width:300px;">
                    <template v-if="!editMode">
                      <div style="color:#717182;font-size:14px;font-family:Arial;">
                        {{ user.memberAddress }}
                      </div>
                    </template>
                    <template v-else>
                      <input
                        v-model="editUser.memberAddress"
                        type="text"
                        style="width:100%;height:28px;border:none;outline:none;background:transparent;font-size:14px;color:#111827;"
                      />
                    </template>
                  </div>
                </div>
                <div style="width:404.67px;height:36px;position:absolute;left:0;top:0;border-radius:8px;border:.67px #D1D5DC solid;pointer-events:none;"></div>
              </div>
            </div>

            <!-- ÏàòÏ†ïÌïòÍ∏∞ / Ï†ÄÏû•ÌïòÍ∏∞ Î≤ÑÌäº (Í≤πÏπ® Ìï¥ÏÜå: absolute Ï†úÍ±∞, Í∞ÄÎ°ú 100%) -->
            <button
              type="button"
              @click="onEditOrSave"
              style="
                width:404.67px;height:44px;margin-top:16px;background:black;border-radius:8px;border:none;cursor:pointer;color:white;font-size:14px;font-family:Arial;
              "
            >
              {{ editMode ? 'Ï†ÄÏû•ÌïòÍ∏∞' : 'ÏàòÏ†ïÌïòÍ∏∞' }}
            </button>

            <!-- Ìë∏ÌÑ∞ ÎßÅÌÅ¨ (Í≤πÏπ® Ìï¥ÏÜå: absolute Ï†úÍ±∞, ÏÉÅÎã® Î≥¥Îçî Ïú†ÏßÄ) -->
            <div
              style="
                width:404.67px;padding-top:24.67px;margin-top:16px;border-top:0.67px #F3F4F6 solid;
                display:inline-flex;justify-content:center;gap:16px;color:#6A7282;font-size:14px;font-family:Arial;
              "
            >
              <div>ÎÇ¥Ï†ïÎ≥¥</div>
              <div>‚Ä¢</div>
              <div>Î≥¥ÏïàÏÑºÌÑ∞</div>
              <div>‚Ä¢</div>
              <div>Í≥†Í∞ùÏÑºÌÑ∞</div>
            </div>

          </div> <!-- /ÌîÑÎ°úÌïÑ Ìèº -->

        </div> <!-- /Î©îÏù∏ ÏÉÅÎåÄ Ïª®ÌÖåÏù¥ÎÑà -->
      </div> <!-- /Î≥∏Î¨∏ ÎûòÌçº -->
    </div>

    <FooterView/>
  </div>
</template>

<script setup>
import { ref, onMounted } from "vue";
import axios from "axios";
import { useRouter } from 'vue-router';
import { watch } from 'vue';

import FooterView from "../FooterView.vue";
import HeaderView from "../HeaderView.vue";

const user = ref({});
const editMode = ref(false);
const router = useRouter()

const token = sessionStorage.getItem('token');
let memberNum = ref("");
let memberId = ref("");
let memberEmail = ref("");
let memberState = ref("");

// Ìé∏Ïßë Î≤ÑÌçº (ÎãâÎÑ§ÏûÑ Ï†úÍ±∞, ÏÑ±Î≥Ñ/ÎÇòÏù¥/ÌÇ§/Î™∏Î¨¥Í≤å Ï∂îÍ∞Ä)
const editUser = ref({
  memberId: "",
  memberPwd: "",
  memberName: "",
  memberEmail: "",
  phoneMasked: "",
  address: "",
  gender: "",
  age: null,
  height: null,
  weight: null,
});

onMounted(async () => {
   try {
    



    axios.get('/api/member-service/member/auth',{
    headers: {
        Authorization: `Bearer ${token}`
    }
    }).then((res) => {
      console.log(res)
      if(res.data.memberId == null){
        router.push('/')
      }else{
        memberNum.value = res.data.memberNum
        memberId.value = res.data.memberId
        memberEmail.value = res.data.memberEmail
        memberState.value = res.data.memberState
      }
    })

    watch(memberNum, async (current,old) => {
      const res = await axios.get(`/api/member-service/member/membernum/${memberNum.value}`);
      user.value = res.data;
    })
  } catch (error) {
    console.error('ÌöåÏõê Ï†ïÎ≥¥ Î∂àÎü¨Ïò§Í∏∞ Ïã§Ìå®:', error);
  }
});




function onOpenInfluencer() {
  alert("Ïù∏ÌîåÎ£®Ïñ∏ÏÑú ÌéòÏù¥ÏßÄÎ°ú Ïù¥ÎèôÌï©ÎãàÎã§.");
}

function fillEditBufferFromUser() {
  editUser.value.memberId    = user.value.memberId    || "";
  editUser.value.memberPwd = "";
  editUser.value.memberName  = user.value.memberName  || "";
  editUser.value.memberEmail = user.value.memberEmail || "";
  editUser.value.memberPhone = user.value.memberPhone|| "";
  editUser.value.memberAddress = user.value.memberAddress     || "";
  editUser.value.memberGender      = user.value.memberGender      || "";
  editUser.value.memberAge         = user.value.memberAge ?? "";
  editUser.value.memberHeight      = user.value.memberHeight ?? "";
  editUser.value.memberWeight      = user.value.memberWeight ?? "";
}

async function saveMember() {
  try {
    if (!user.value?.memberNum) {
      throw new Error("ÌöåÏõê Í≥†Ïú†Î≤àÌò∏(memberNum)Í∞Ä ÏóÜÏäµÎãàÎã§.");
    }
    const token = localStorage.getItem("accessToken");
    const headers = { "Content-Type": "application/json" };
    if (token) headers.Authorization = `Bearer ${token}`;

    const payload = {
      memberNum:   user.value.memberNum,
      memberId:    editUser.value.memberId,
      memberPwd:   editUser.value.memberPwd,
      memberName:  editUser.value.memberName,
      memberEmail: editUser.value.memberEmail,
      memberPhone: editUser.value.memberPhone,
      memberAddress:     editUser.value.memberAddress,
      memberGender:      editUser.value.memberGender,
      memberAge:         editUser.value.memberAge,
      memberHeight:      editUser.value.memberHeight,
      memberWeight:      editUser.value.memberWeight,
    };

    const url = `/api/member-service/member/membernum/${encodeURIComponent(user.value.memberNum)}`;
    await axios.put(url, payload, { headers });

    user.value = { ...user.value, ...payload };
    alert("ÌöåÏõêÏ†ïÎ≥¥Í∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§.");
    editMode.value = false;
  } catch (error) {
    console.error("ÌöåÏõêÏ†ïÎ≥¥ ÏàòÏ†ï Ïã§Ìå®:", error?.response?.data || error.message || error);
    alert("ÌöåÏõêÏ†ïÎ≥¥ ÏàòÏ†ïÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.");
  }
}

function onEditOrSave() {
  if (!editMode.value) {
    fillEditBufferFromUser();
    editMode.value = true;
  } else {
    saveMember();
  }
}
</script>

<style scoped>
/* Ï†ÑÎã¨Î∞õÏùÄ ÎîîÏûêÏù∏ÏùÑ ÏµúÎåÄÌïú Ïú†ÏßÄÌïòÍ∏∞ ÏúÑÌï¥ Î≥ÑÎèÑ ÌÅ¥ÎûòÏä§Îäî ÏµúÏÜåÌôîÌñàÏäµÎãàÎã§. */
</style>
